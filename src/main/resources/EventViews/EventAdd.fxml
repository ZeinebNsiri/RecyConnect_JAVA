<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.text.Font?>

<ScrollPane xmlns:fx="http://javafx.com/fxml/1"
            xmlns="http://javafx.com/javafx/17"
            fx:controller="controllers.Events.EventAddController"
            fitToWidth="true"
            style="-fx-background-color: transparent;">

    <content>
        <VBox spacing="25" alignment="TOP_CENTER"
              style="-fx-background-color: #f5f7fa; -fx-padding: 30;">

            <VBox spacing="25" alignment="TOP_CENTER"
                  maxWidth="800"
                  style="-fx-background-color: white;
                         -fx-padding: 40 50;
                         -fx-background-radius: 15;
                         -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.08), 15, 0, 0, 5);">

                <!-- Header -->
                <HBox alignment="CENTER">
                    <VBox alignment="CENTER">
                        <Label text="Ajouter un événement"
                               style="-fx-font-size: 28px;
                                      -fx-font-weight: bold;
                                      -fx-text-fill: #2c3e50;" />
                    </VBox>
                </HBox>

                <!-- General Info Section -->
                <VBox spacing="20" alignment="TOP_LEFT"
                      style="-fx-background-color: #f8f9fa;
                             -fx-background-radius: 10;
                             -fx-padding: 20;">
                    <Label text="Informations générales"
                           style="-fx-font-weight: bold;
                                  -fx-font-size: 18px;
                                  -fx-text-fill: #2c3e50;" />

                    <VBox spacing="8">
                        <Label text="Nom de l'événement"
                               style="-fx-font-weight: 600;
                                      -fx-text-fill: #495057;" />
                        <TextField fx:id="nameField"
                                   style="-fx-background-radius: 5;
                                          -fx-padding: 10 15;
                                          -fx-font-size: 14px;" />
                        <Label fx:id="nameErrorLabel"
                               textFill="#e74c3c"
                               visible="false"
                               style="-fx-font-size: 12px;" />
                    </VBox>

                    <VBox spacing="8">
                        <Label text="Description"
                               style="-fx-font-weight: 600;
                                      -fx-text-fill: #495057;" />
                        <TextField fx:id="descriptionField"
                                   style="-fx-background-radius: 5;
                                          -fx-padding: 10 15;
                                          -fx-font-size: 14px;" />
                        <Label fx:id="descriptionErrorLabel"
                               textFill="#e74c3c"
                               visible="false"
                               style="-fx-font-size: 12px;" />
                    </VBox>
                </VBox>

                <!-- Date and Time Section -->
                <VBox spacing="20" alignment="TOP_LEFT"
                      style="-fx-background-color: #f8f9fa;
                             -fx-background-radius: 10;
                             -fx-padding: 20;">
                    <Label text="Date et heure"
                           style="-fx-font-weight: bold;
                                  -fx-font-size: 18px;
                                  -fx-text-fill: #2c3e50;" />

                    <HBox spacing="15">
                        <VBox spacing="8" HBox.hgrow="ALWAYS">
                            <Label text="Date"
                                   style="-fx-font-weight: 600;
                                          -fx-text-fill: #495057;" />
                            <DatePicker fx:id="datePicker"
                                        style="-fx-background-radius: 5;
                                              -fx-padding: 5;
                                              -fx-font-size: 14px;" />
                            <Label fx:id="dateErrorLabel"
                                   textFill="#e74c3c"
                                   visible="false"
                                   style="-fx-font-size: 12px;" />
                        </VBox>

                        <VBox spacing="8" HBox.hgrow="ALWAYS">
                            <Label text="Heure de début"
                                   style="-fx-font-weight: 600;
                                          -fx-text-fill: #495057;" />
                            <TextField fx:id="timeField"
                                       promptText="HH:mm"
                                       style="-fx-background-radius: 5;
                                              -fx-padding: 10 15;
                                              -fx-font-size: 14px;" />
                            <Label fx:id="timeErrorLabel"
                                   textFill="#e74c3c"
                                   visible="false"
                                   style="-fx-font-size: 12px;" />
                        </VBox>

                        <VBox spacing="8" HBox.hgrow="ALWAYS">
                            <Label text="Heure de fin"
                                   style="-fx-font-weight: 600;
                                          -fx-text-fill: #495057;" />
                            <TextField fx:id="endTimeField"
                                       promptText="HH:mm"
                                       style="-fx-background-radius: 5;
                                              -fx-padding: 10 15;
                                              -fx-font-size: 14px;" />
                            <Label fx:id="endTimeErrorLabel"
                                   textFill="#e74c3c"
                                   visible="false"
                                   style="-fx-font-size: 12px;" />
                        </VBox>
                    </HBox>
                </VBox>

                <!-- Location Section -->
                <VBox spacing="20" alignment="TOP_LEFT"
                      style="-fx-background-color: #f8f9fa;
                             -fx-background-radius: 10;
                             -fx-padding: 20;">
                    <Label text="Lieu et accès"
                           style="-fx-font-weight: bold;
                                  -fx-font-size: 18px;
                                  -fx-text-fill: #2c3e50;" />

                    <VBox spacing="8">
                        <Label text="Lieu physique"
                               style="-fx-font-weight: 600;
                                      -fx-text-fill: #495057;" />
                        <TextField fx:id="locationField"
                                   style="-fx-background-radius: 5;
                                          -fx-padding: 10 15;
                                          -fx-font-size: 14px;" />
                        <Label fx:id="locationErrorLabel"
                               textFill="#e74c3c"
                               visible="false"
                               style="-fx-font-size: 12px;" />
                    </VBox>

                    <VBox spacing="8">
                        <Label text="Coordonnées carte"
                               style="-fx-font-weight: 600;
                                      -fx-text-fill: #495057;" />
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <TextField fx:id="coordinatesField"
                                       promptText="Coordonnées (lat,lon)"
                                       editable="false"
                                       HBox.hgrow="ALWAYS"
                                       style="-fx-background-radius: 5;
                                              -fx-padding: 10 15;
                                              -fx-font-size: 14px;" />
                            <Button text="Choisir sur la carte"
                                    onAction="#handleOpenMap"
                                    style="-fx-background-color: #3498db;
                                           -fx-text-fill: white;
                                           -fx-background-radius: 5;
                                           -fx-padding: 10 15;
                                           -fx-font-weight: bold;
                                           -fx-cursor: hand;" />
                        </HBox>
                    </VBox>
                </VBox>

                <!-- Capacity Section -->
                <VBox spacing="20" alignment="TOP_LEFT"
                      style="-fx-background-color: #f8f9fa;
                             -fx-background-radius: 10;
                             -fx-padding: 20;">
                    <Label text="Capacité"
                           style="-fx-font-weight: bold;
                                  -fx-font-size: 18px;
                                  -fx-text-fill: #2c3e50;" />

                    <HBox spacing="20">
                        <VBox spacing="8" HBox.hgrow="ALWAYS">
                            <Label text="Capacité totale"
                                   style="-fx-font-weight: 600;
                                          -fx-text-fill: #495057;" />
                            <TextField fx:id="capacityField"
                                       style="-fx-background-radius: 5;
                                              -fx-padding: 10 15;
                                              -fx-font-size: 14px;" />
                            <Label fx:id="capacityErrorLabel"
                                   textFill="#e74c3c"
                                   visible="false"
                                   style="-fx-font-size: 12px;" />
                        </VBox>

                        <VBox spacing="8" HBox.hgrow="ALWAYS">
                            <Label text="Places restantes"
                                   style="-fx-font-weight: 600;
                                          -fx-text-fill: #495057;" />
                            <TextField fx:id="remainingField"
                                       style="-fx-background-radius: 5;
                                              -fx-padding: 10 15;
                                              -fx-font-size: 14px;" />
                            <Label fx:id="remainingErrorLabel"
                                   textFill="#e74c3c"
                                   visible="false"
                                   style="-fx-font-size: 12px;" />
                        </VBox>
                    </HBox>
                </VBox>

                <!-- Hidden Google Meet Link -->
                <TextField fx:id="linkField"
                           promptText="Lien Google Meet"
                           visible="false"
                           style="-fx-background-radius: 5;
                                  -fx-padding: 10 15;
                                  -fx-font-size: 14px;" />
            </VBox>


            <HBox spacing="35" alignment="CENTER" style="-fx-padding: 15;">
                <Button text="Ajouter" onAction="#saveEvent"
                        style="-fx-background-color: #28a745; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 5;"/>
                <Button text="Annuler" onAction="#cancelForm"
                        style="-fx-background-color: #dc3545; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 5;"/>
            </HBox>
        </VBox>
    </content>
</ScrollPane>